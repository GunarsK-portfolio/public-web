[
  {
    "id": 3692116366,
    "node_id": "PRR_kwDOP_OMl87cETmO",
    "user": {
      "login": "coderabbitai[bot]",
      "id": 136622811,
      "node_id": "BOT_kgDOCCSy2w",
      "avatar_url": "https://avatars.githubusercontent.com/in/347564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/coderabbitai%5Bbot%5D",
      "html_url": "https://github.com/apps/coderabbitai",
      "followers_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/received_events",
      "type": "Bot",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "**Actionable comments posted: 10**\n\n<details>\n<summary>ü§ñ Fix all issues with AI agents</summary>\n\n```\nIn @.github/workflows/sitemap.yml:\n- Around line 105-129: The timeout branch currently prints \"Timeout\" without the\nlast observed service status; update the wait loop so that when it exits due to\nMAX_ATTEMPTS being reached it echoes the final ATTEMPT number and the last\nSTATUS value (e.g., include SERVICE_ARN, ATTEMPT, and STATUS variables in the\ntimeout message) before exiting with code 1; ensure STATUS is captured in the\nloop scope so it can be referenced after the loop and use a clear message like\n\"Timeout after $ATTEMPT attempts: last status = $STATUS\" to aid debugging.\n- Around line 54-59: The workflow currently passes secrets via --build-arg\n(VITE_API_URL and VITE_MESSAGE_API_URL) to the docker build command which embeds\nthem into image layers; change the build to avoid --build-arg for secrets by\nswitching to BuildKit secrets or a multi-stage build where secrets are used only\nin a discarded stage: update the workflow to enable BuildKit and pass secrets\nvia the secret mount mechanism (instead of --build-arg) and update the\nDockerfile to consume them with RUN --mount=type=secret, or alternatively create\na temporary build stage that uses the secrets and is not present in the final\nimage; ensure the docker build invocation and the Dockerfile references\n(VITE_API_URL / VITE_MESSAGE_API_URL usage) are adjusted accordingly so secrets\nare never baked into final layers.\n\nIn `@package.json`:\n- Line 18: The package version for `@unhead/vue` in package.json is invalid;\nupdate the dependency entry for \"@unhead/vue\" to a valid published version by\nreplacing \"^2.1.2\" with \"^2.0.19\" (i.e., update the value string for the\n\"@unhead/vue\" key) so npm/yarn can resolve and install the package successfully.\n\nIn `@README.md`:\n- Around line 19-20: The phrase \"SEO optimization with dynamic meta tags\" is\nredundant; update the README entry (the bullet text containing \"SEO optimization\nwith dynamic meta tags\") to remove the redundancy by using either \"SEO with\ndynamic meta tags\" or the expanded form \"Search Engine Optimization with dynamic\nmeta tags\" so the wording is concise and non-tautological.\n\nIn `@scripts/generate-sitemap.js`:\n- Line 6: The BASE_URL constant is duplicated; extract it to a shared export and\nimport it where needed: create a single exported constant (e.g., export const\nBASE_URL) and replace the hardcoded BASE_URL in scripts/generate-sitemap.js and\nthe useSeoMeta function (useSeoMeta.js) to import that shared symbol; for the\nNode script you can alternatively read from process.env with a sensible default\nthat references the shared value to avoid divergence.\n- Around line 17-23: The fetchFromApi function uses fetch without a timeout\nwhich can hang; wrap the fetch in an AbortController: create an AbortController,\nstart a setTimeout that calls controller.abort() after a reasonable timeout\n(e.g., 10s), pass controller.signal to fetch(`${API_URL}${endpoint}`, { signal\n}), clear the timeout after a successful response, and when abort occurs throw a\ndescriptive error so sitemap generation fails fast instead of hanging.\n\nIn `@src/composables/useSeoMeta.js`:\n- Around line 32-46: The SEO meta array in useSeoMeta.js duplicates image URL\nnormalization and lacks og:locale; update the function (useSeoMeta) to normalize\nthe image URL once into a local variable (e.g., resolvedImage or imageUrl using\nthe existing BASE_URL + img logic and img.startsWith('http') check) and replace\nboth occurrences with that variable, and add an { property: 'og:locale',\ncontent: LOCALE } entry (or use SITE_LOCALE/locale from config) into the\nreturned meta array so Open Graph includes the page language.\n- Around line 4-8: Move the BASE_URL constant into a shared config module (e.g.,\nexport const BASE_URL from a new seo config such as seoConfig or apiConfig) and\nupdate usage sites to import it instead of declaring a local BASE_URL;\nspecifically remove the local BASE_URL declaration in useSeoMeta (and in the\nsitemap generator) and recompose DEFAULT_IMAGE in useSeoMeta to use the imported\nBASE_URL so DEFAULT_IMAGE stays correct; ensure other modules that currently\ndeclare BASE_URL (e.g., the sitemap generator) import the same exported BASE_URL\nto keep canonical URLs and OG image paths consistent.\n\nIn `@src/views/Home.vue`:\n- Around line 33-37: The useSeoMeta call in Home.vue is explicitly passing a\ndescription that duplicates DEFAULT_DESCRIPTION from useSeoMeta.js; remove the\nredundant description key (or set description: undefined) in the useSeoMeta({\ntitle: '', path: '/' }) call so the composable falls back to DEFAULT_DESCRIPTION\ndefined in useSeoMeta.js; locate the useSeoMeta invocation in Home.vue and\nadjust it to omit the description field to keep a single source of truth.\n\nIn `@src/views/MiniatureTheme.vue`:\n- Around line 97-102: The SEO image currently uses\ntheme.value?.coverImageFile?.url directly in useSeoMeta; import and use\naddSourceToFileUrl to wrap that URL so audit logging matches other views‚Äîupdate\nthe import to include addSourceToFileUrl and change the image computed in\nuseSeoMeta to compute(() => addSourceToFileUrl(theme.value?.coverImageFile?.url)\n|| null), keeping the existing useSeoMeta, theme and route usage intact.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
    "state": "COMMENTED",
    "html_url": "https://github.com/GunarsK-portfolio/public-web/pull/76#pullrequestreview-3692116366",
    "pull_request_url": "https://api.github.com/repos/GunarsK-portfolio/public-web/pulls/76",
    "author_association": "NONE",
    "_links": {
      "html": {
        "href": "https://github.com/GunarsK-portfolio/public-web/pull/76#pullrequestreview-3692116366"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/GunarsK-portfolio/public-web/pulls/76"
      }
    },
    "submitted_at": "2026-01-22T12:03:37Z",
    "commit_id": "25f467c9abea688104214b3a890a05c27b35910e"
  },
  {
    "id": 3692160182,
    "node_id": "PRR_kwDOP_OMl87cEeS2",
    "user": {
      "login": "coderabbitai[bot]",
      "id": 136622811,
      "node_id": "BOT_kgDOCCSy2w",
      "avatar_url": "https://avatars.githubusercontent.com/in/347564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/coderabbitai%5Bbot%5D",
      "html_url": "https://github.com/apps/coderabbitai",
      "followers_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/coderabbitai%5Bbot%5D/received_events",
      "type": "Bot",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "**Actionable comments posted: 6**\n\n<details>\n<summary>ü§ñ Fix all issues with AI agents</summary>\n\n```\nIn @.github/workflows/sitemap.yml:\n- Around line 23-26: The regenerate job in the GitHub Actions workflow lacks a\nhard timeout, so if earlier steps hang the job could run indefinitely; update\nthe job definition for the \"regenerate\" job to add a job-level timeout by adding\na timeout-minutes property (e.g., timeout-minutes: 30) under the regenerate job\nconfiguration so the workflow is forcibly cancelled after the specified ceiling.\n- Around line 71-81: The SERVICE_ARN lookup can return the literal string \"None\"\nwhen the JMESPath query misses, so the current -z check misses that case; update\nthe validation after SERVICE_ARN is assigned to treat both empty and \"None\"\n(case-insensitive) as not found and exit with the same error path ‚Äî e.g., check\nSERVICE_ARN for being empty or equal to \"None\" (or \"none\") before writing to\nGITHUB_OUTPUT; reference SERVICE_ARN, APP_RUNNER_SERVICE and GITHUB_OUTPUT when\nmaking this change.\n\nIn `@scripts/generate-sitemap.js`:\n- Around line 17-32: The fetchFromApi function currently aborts with\nAbortController but lets the generic AbortError bubble up; update fetchFromApi\nto add a try/catch around the fetch so you can detect an abort (e.g., error.name\n=== 'AbortError' or error.type === 'aborted') and rethrow a clearer, contextual\nerror like \"Request to <endpoint> timed out after <timeoutMs>ms\"; for non-abort\nerrors rethrow the original error, and keep the existing finally block that\nclears timeoutId. Use the function name fetchFromApi and the controller.signal\nreference to locate where to add the catch and custom error handling.\n- Around line 43-45: The current call using Promise.all over themes\n(themesWithMiniatures = await Promise.all(themes.map((theme) =>\nfetchFromApi(`/miniatures/themes/${theme.id}`)))) can overload the API when\ntheme count grows; change this to a batched fetch approach (e.g., implement a\nhelper like fetchInBatches or fetchThemesInBatches that takes a batchSize N and\niterates over themes, issuing fetchFromApi calls in groups) or replace with a\nresilient pattern using Promise.allSettled plus simple retry logic around\nfetchFromApi for failed items; update the code that references\nthemesWithMiniatures to use the new helper and make batchSize configurable for\nfuture tuning.\n\nIn `@src/composables/useSeoMeta.js`:\n- Around line 50-54: The canonical URL computation is duplicated between the\nmeta block and the link computed property; compute the canonical once (e.g.,\nderive a `canonical` constant from `unref(path)` and `BASE_URL` before or inside\nthe `useHead` call) and then reuse that `canonical` in both `meta` and the\n`link` computed instead of recomputing it, updating the `link` computed (the\nfunction referenced as `link: computed(...)`) to reference the shared\n`canonical` variable and keep the original `path`, `BASE_URL`, and `useHead`\nlogic intact.\n- Around line 33-48: Add explicit OG image dimension meta tags alongside the\nexisting og:image entry in the array returned by the useSeoMeta function: when\nyou push the { property: 'og:image', content: absoluteImg } object, also add {\nproperty: 'og:image:width', content: '<width>' } and { property:\n'og:image:height', content: '<height>' } (or use constants if you have fixed\nsizes) so social platforms get consistent preview dimensions; update the\nreturned array near the og:image/absoluteImg entries accordingly.\n```\n\n</details>\n\n<details>\n<summary>‚ôªÔ∏è Duplicate comments (3)</summary><blockquote>\n\n<details>\n<summary>.github/workflows/sitemap.yml (1)</summary><blockquote>\n\n`54-59`: **Build arguments still expose secrets in Docker layer history.**\n\nThis issue was flagged in a previous review. Passing secrets via `--build-arg` embeds them in the image layers. Consider using Docker BuildKit secrets or multi-stage builds where secrets are only used in discarded stages.\n\n</blockquote></details>\n<details>\n<summary>scripts/generate-sitemap.js (1)</summary><blockquote>\n\n`6-6`: **Duplicate `BASE_URL` constant ‚Äî consider sharing.**\n\nThis was flagged in a previous review. `BASE_URL` is defined identically here and in `src/composables/useSeoMeta.js` (line 4). Centralizing it prevents drift.\n\n</blockquote></details>\n<details>\n<summary>src/composables/useSeoMeta.js (1)</summary><blockquote>\n\n`4-8`: **`BASE_URL` duplication still present.**\n\nThis was flagged in a previous review. The constant is defined identically in `scripts/generate-sitemap.js`. Centralizing it prevents maintenance drift.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
    "state": "COMMENTED",
    "html_url": "https://github.com/GunarsK-portfolio/public-web/pull/76#pullrequestreview-3692160182",
    "pull_request_url": "https://api.github.com/repos/GunarsK-portfolio/public-web/pulls/76",
    "author_association": "NONE",
    "_links": {
      "html": {
        "href": "https://github.com/GunarsK-portfolio/public-web/pull/76#pullrequestreview-3692160182"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/GunarsK-portfolio/public-web/pulls/76"
      }
    },
    "submitted_at": "2026-01-22T12:15:41Z",
    "commit_id": "a3cec92fe7338903efd232f8a38e7a6dc280ab8e"
  }
]
